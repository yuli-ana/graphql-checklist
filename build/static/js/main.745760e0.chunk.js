(this["webpackJsonpgraphql-checklist"]=this["webpackJsonpgraphql-checklist"]||[]).push([[0],{54:function(e,t,n){e.exports=n(68)},68:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n.n(r),o=n(51),c=n.n(o),i=n(20),u=n.n(i),l=n(34),s=n(26),d=n(25),p=n(14);n(60);function f(){var e=Object(d.a)(["\nmutation deleteTodo($id: uuid!) {\n  delete_todos(where: {id: {_eq: $id}}) {\n    returning {\n      done\n      id\n      text\n    }\n  }\n}\n    \n    "]);return f=function(){return e},e}function m(){var e=Object(d.a)(["\n    mutation addTodo($text: String!) {\n      insert_todos(objects: {text: $text}) {\n        returning {\n          done\n          id\n          text\n        }\n      }\n    }\n    "]);return m=function(){return e},e}function b(){var e=Object(d.a)(["\n    mutation ToggleTodo($id:uuid, $done: Boolean!) {\n      update_todos(where: {id: {_eq: $id }}, _set: {done: $done}) {\n        returning {\n          done\n          id\n          text\n        }\n      }\n    }\n    "]);return b=function(){return e},e}function h(){var e=Object(d.a)(["\nquery getQuery {\n      todos {\n        done\n        id\n        text\n      }\n    }\n    "]);return h=function(){return e},e}var g=Object(p.gql)(h()),v=Object(p.gql)(b()),y=Object(p.gql)(m()),x=Object(p.gql)(f());var j=function(){var e=Object(r.useState)(""),t=Object(s.a)(e,2),n=t[0],o=t[1],c=Object(p.useQuery)(g),i=c.data,d=c.loading,f=c.error,m=Object(p.useMutation)(v),b=Object(s.a)(m,1)[0],h=Object(p.useMutation)(y,{onCompleted:function(){return o("")}}),j=Object(s.a)(h,1)[0],O=Object(p.useMutation)(x),E=Object(s.a)(O,1)[0];if(d)return a.a.createElement("div",null,"Loading...");if(f)return a.a.createElement("div",null,"Error fetching todos...");function k(){return(k=Object(l.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n.trim()){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,j({variables:{text:n},refetchQueries:[{query:g}]});case 5:r=e.sent,console.log("added todo",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=Object(l.a)(u.a.mark((function e(t){var n,r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,r=t.done,e.next=3,b({variables:{id:n,done:!r}});case 3:a=e.sent,console.log("toggled todo",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(){return(q=Object(l.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.id,!window.confirm("Do you want to delete this todo?")){e.next=7;break}return e.next=5,E({variables:{id:n},update:function(e){var t=e.readQuery({query:g}).todos.filter((function(e){return e.id!==n}));e.writeQuery({query:g,data:{todos:t}})}});case 5:r=e.sent,console.log("deleted todo",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return a.a.createElement("div",{className:"vh-100 code flex flex-column items-center bg-purple pa4 fl-1"},a.a.createElement("h1",{className:"f2-l"},"GraphQL checklist ",a.a.createElement("span",{role:"img","aria-label":"Checkmark"},"\u2705")),a.a.createElement("form",{action:"",className:"mb3",onSubmit:function(e){return k.apply(this,arguments)}},a.a.createElement("input",{className:"pa2 f4 b--dashed",type:"text",placeholder:"Write your todo",onChange:function(e){o(e.target.value)},value:n}),a.a.createElement("button",{className:"pa2 f4 bg-green",type:"submit"},"Create")),a.a.createElement("div",{className:"flex items-center justify-center flex-column"},i.todos.map((function(e){return a.a.createElement("p",{onDoubleClick:function(){return function(e){return w.apply(this,arguments)}(e)},key:e.id},a.a.createElement("span",{className:'pointer list pa1 f3" '.concat(e.done&&"strike"),style:{listStyle:"none"}},e.text),a.a.createElement("button",{onClick:function(){return function(e){return q.apply(this,arguments)}(e)},className:"bg-transparent bn f4"},a.a.createElement("span",{className:"red"},"\xd7")))}))))},O=new p.ApolloClient({uri:"https://intent-raccoon-42.hasura.app/v1/graphql",cache:new p.InMemoryCache});c.a.render(a.a.createElement(p.ApolloProvider,{client:O},a.a.createElement(j,null)),document.getElementById("root"))}},[[54,1,2]]]);
//# sourceMappingURL=main.745760e0.chunk.js.map